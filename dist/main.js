(()=>{"use strict";const e=[];class t{constructor(e){this.title=e,this.tasks=[]}removeProject(){e.splice(e.indexOf(this),1)}addTask(e){console.log(this.tasks),this.tasks.push(e)}removeTask(e){this.tasks.splice(this.tasks.indexOf(e),1)}}class n{constructor(e,t,n,d,c){this.title=e,this.desc=t,this.duedate=n,this.priority=d,this.complete=c}}let d=document.getElementById("project-header");function c(n){s();const c=document.createElement("div"),a=document.createElement("p"),r=document.createElement("button");for(d.innerText=n,c.classList.add("project"),c.setAttribute("data-project-index",e.length),a.classList.add("mouse-effect"),a.innerText=n,r.classList.add("close-btn"),r.innerText="X",document.getElementById("add-project-btn").disabled=!1,a.addEventListener("click",(()=>{d.innerText=n;let e=c.dataset.projectIndex;document.getElementById("task-form").dataset.projectIndex=e,s();for(let t of l.tasks)o(t.title,t.desc,t.duedate,t.priority,t.complete,e)})),r.addEventListener("click",(()=>{let t=c.dataset.projectIndex;if(function(t,n){let c=t.dataset.projectIndex;t.remove(),n.removeProject(),c>0?(document.getElementById("task-form").dataset.projectIndex=c-1,d.innerText=e[c-1].title):d.innerText="";const o=document.querySelectorAll(`div.task[data-project-index="${c}"]`);for(let e of o)e.remove();const s=document.querySelectorAll(".project");for(let t in e)s[t].setAttribute("data-project-index",t)}(c,l),t>0)for(let n of e[t-1].tasks)o(n.title,n.desc,n.duedate,n.priority,n.complete,t-1)}));c.hasChildNodes();)c.removeChild(c.lastChild);document.getElementById("task-container").appendChild(d),document.getElementById("projects-container").appendChild(c),c.append(a,r),document.getElementById("task-form").dataset.projectIndex=c.dataset.projectIndex,document.getElementById("project-form").reset(),document.getElementById("project-form-container").style.display="none";const l=function(n){const d=new t(n);return e.push(d),d}(a.innerText)}function o(e,t,n,d,c,o){const s=document.createElement("div"),r=document.createElement("label"),l=document.createElement("input"),i=document.createElement("p"),m=document.createElement("p"),u=document.createElement("p"),p=document.createElement("p"),E=document.createElement("button");s.classList.add("task"),s.setAttribute("data-project-index",o),r.innerText=!0===c?"Complete":"Unfinished",l.type="checkbox",l.classList.add("checkbox"),i.innerText=e,m.classList.add("desc"),m.innerText=t,u.innerText=n,p.innerText=d,E.classList.add("close-btn"),E.innerText="X",E.addEventListener("click",(()=>{a(s,task)})),document.getElementById("task-container").appendChild(s),s.append(r,i,m,u,p,E),r.appendChild(l)}function s(){const e=document.getElementById("task-container");for(;e.hasChildNodes()&&e.childElementCount>1;)e.removeChild(e.lastChild)}function a(t,n){let d=t.dataset.projectIndex;t.remove(),e[d].removeTask(n)}c("Default");const r=document.getElementById("add-project-btn"),l=document.getElementById("add-task-btn"),i=document.getElementById("task-form");document.getElementById("project-form").addEventListener("submit",(e=>{e.preventDefault(),c(e.target[0].value)})),r.addEventListener("click",(()=>{document.getElementById("project-form-container").style.display="block"})),i.addEventListener("submit",(t=>{t.preventDefault(),console.log(t.target.dataset.projectIndex),function(t){const d=document.createElement("div"),c=document.createElement("label"),o=document.createElement("input"),s=document.createElement("p"),r=document.createElement("p"),l=document.createElement("p"),i=document.createElement("p"),m=document.createElement("button");let u=document.getElementById("title").value,p=document.getElementById("desc").value,E=document.getElementById("due-date").value,y=document.getElementById("priority").value;d.classList.add("task"),d.setAttribute("data-project-index",t),c.innerText="Unfinished",o.type="checkbox",o.classList.add("checkbox"),s.innerText=u,r.classList.add("desc"),r.innerText=p,l.innerText=E,i.innerText=y,m.classList.add("close-btn"),m.innerText="X",m.addEventListener("click",(()=>{a(d,x)})),document.getElementById("task-container").appendChild(d),d.append(c,s,r,l,i,m),c.appendChild(o),document.getElementById("task-form").reset(),document.getElementById("task-form-container").style.display="none";const x=function(t,d,c,o,s,a){const r=new n(t,d,c,o,!1);return e[a].addTask(r),r}(u,p,E,y,0,t);console.log(e)}(t.target.dataset.projectIndex)})),l.addEventListener("click",(()=>{document.querySelectorAll(".project").length>0&&(document.getElementById("task-form-container").style.display="block")}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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anMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL0RPTS5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgYXJyUHJvamVjdHMgPSBbXVxuXG5jbGFzcyBQcm9qZWN0IHtcbiAgY29uc3RydWN0b3IodGl0bGUpIHtcbiAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgdGhpcy50YXNrcyA9IFtdO1xuICB9XG4gIHJlbW92ZVByb2plY3QoKSB7XG4gICAgYXJyUHJvamVjdHMuc3BsaWNlKGFyclByb2plY3RzLmluZGV4T2YodGhpcyksIDEpO1xuICB9XG4gIFxuICBhZGRUYXNrKHRhc2spIHtcbiAgICBjb25zb2xlLmxvZyh0aGlzLnRhc2tzKTtcbiAgICB0aGlzLnRhc2tzLnB1c2godGFzayk7XG4gIH1cblxuICByZW1vdmVUYXNrKHRhc2spIHtcbiAgICB0aGlzLnRhc2tzLnNwbGljZSh0aGlzLnRhc2tzLmluZGV4T2YodGFzayksIDEpO1xuICB9XG59XG5cbmNsYXNzIFRhc2sge1xuICBjb25zdHJ1Y3Rvcih0aXRsZSwgZGVzYywgZHVlZGF0ZSwgcHJpb3JpdHksIGNvbXBsZXRlKSB7XG4gICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgIHRoaXMuZGVzYyA9IGRlc2M7XG4gICAgdGhpcy5kdWVkYXRlID0gZHVlZGF0ZTtcbiAgICB0aGlzLnByaW9yaXR5ID0gcHJpb3JpdHk7XG4gICAgdGhpcy5jb21wbGV0ZSA9IGNvbXBsZXRlO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVByb2plY3RDbGFzcyh0aXRsZSkge1xuICBjb25zdCBwcm9qZWN0ID0gbmV3IFByb2plY3QodGl0bGUpO1xuICBhcnJQcm9qZWN0cy5wdXNoKHByb2plY3QpO1xuICByZXR1cm4gcHJvamVjdDtcbn1cblxuZnVuY3Rpb24gY3JlYXRlVGFza0NsYXNzKHRpdGxlLCBkZXNjLCBkdWVkYXRlLCBwcmlvcml0eSwgY29tcGxldGUsIHByb2plY3RJbmRleCkge1xuICBjb25zdCB0YXNrID0gbmV3IFRhc2sodGl0bGUsIGRlc2MsIGR1ZWRhdGUsIHByaW9yaXR5LCBjb21wbGV0ZSk7XG4gIGFyclByb2plY3RzW3Byb2plY3RJbmRleF0uYWRkVGFzayh0YXNrKTtcbiAgcmV0dXJuIHRhc2s7XG59XG5cbmV4cG9ydCB7Y3JlYXRlUHJvamVjdENsYXNzLCBjcmVhdGVUYXNrQ2xhc3MsIGFyclByb2plY3RzfSIsImltcG9ydCB7IGNyZWF0ZVByb2plY3RDbGFzcywgY3JlYXRlVGFza0NsYXNzLCBhcnJQcm9qZWN0cyB9IGZyb20gXCIuL2xvZ2ljLmpzXCI7XG5sZXQgcHJvamVjdEhlYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9qZWN0LWhlYWRlcicpO1xuXG5mdW5jdGlvbiBjcmVhdGVQcm9qZWN0KHByb2plY3ROYW1lKSB7XG4gIGNsZWFyVGFzaygpO1xuICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgY29uc3QgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgY29uc3QgYnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG5cbiAgcHJvamVjdEhlYWRlci5pbm5lclRleHQgPSBwcm9qZWN0TmFtZTtcbiAgZGl2LmNsYXNzTGlzdC5hZGQoJ3Byb2plY3QnKTtcbiAgZGl2LnNldEF0dHJpYnV0ZSgnZGF0YS1wcm9qZWN0LWluZGV4JywgYXJyUHJvamVjdHMubGVuZ3RoKTtcbiAgcC5jbGFzc0xpc3QuYWRkKCdtb3VzZS1lZmZlY3QnKTtcbiAgcC5pbm5lclRleHQgPSBwcm9qZWN0TmFtZTtcbiAgYnRuLmNsYXNzTGlzdC5hZGQoJ2Nsb3NlLWJ0bicpO1xuICBidG4uaW5uZXJUZXh0ID0gXCJYXCI7XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGQtcHJvamVjdC1idG4nKS5kaXNhYmxlZCA9IGZhbHNlO1xuXG4gIHAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgcHJvamVjdEhlYWRlci5pbm5lclRleHQgPSBwcm9qZWN0TmFtZTtcbiAgICBsZXQgcHJvamVjdEluZGV4ID0gZGl2LmRhdGFzZXQucHJvamVjdEluZGV4O1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YXNrLWZvcm0nKS5kYXRhc2V0LnByb2plY3RJbmRleCA9IHByb2plY3RJbmRleDtcbiAgICBjbGVhclRhc2soKTtcbiAgICBmb3IobGV0IHRhc2sgb2YgcHJvamVjdC50YXNrcykge1xuICAgICAgYXBwZW5kVGFzayh0YXNrLnRpdGxlLCB0YXNrLmRlc2MsIHRhc2suZHVlZGF0ZSwgdGFzay5wcmlvcml0eSwgdGFzay5jb21wbGV0ZSwgcHJvamVjdEluZGV4LCBwcm9qZWN0TmFtZSk7XG4gICAgfVxuICB9KTtcblxuICBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgbGV0IHByb2plY3RJbmRleCA9IGRpdi5kYXRhc2V0LnByb2plY3RJbmRleDtcbiAgICBkZWxldGVQcm9qZWN0KGRpdiwgcHJvamVjdCk7XG4gICAgaWYocHJvamVjdEluZGV4ID4gMCkge1xuICAgICAgZm9yKGxldCB0YXNrIG9mIGFyclByb2plY3RzW3Byb2plY3RJbmRleCAtIDFdLnRhc2tzKSB7XG4gICAgICAgIGFwcGVuZFRhc2sodGFzay50aXRsZSwgdGFzay5kZXNjLCB0YXNrLmR1ZWRhdGUsIHRhc2sucHJpb3JpdHksIHRhc2suY29tcGxldGUsIHByb2plY3RJbmRleCAtIDEsIHByb2plY3ROYW1lKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHdoaWxlKGRpdi5oYXNDaGlsZE5vZGVzKCkpIHtcbiAgICBkaXYucmVtb3ZlQ2hpbGQoZGl2Lmxhc3RDaGlsZCk7XG4gIH1cblxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFzay1jb250YWluZXInKS5hcHBlbmRDaGlsZChwcm9qZWN0SGVhZGVyKTtcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2plY3RzLWNvbnRhaW5lcicpLmFwcGVuZENoaWxkKGRpdik7XG4gIGRpdi5hcHBlbmQocCwgYnRuKTtcblxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFzay1mb3JtJykuZGF0YXNldC5wcm9qZWN0SW5kZXggPSBkaXYuZGF0YXNldC5wcm9qZWN0SW5kZXg7XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9qZWN0LWZvcm0nKS5yZXNldCgpO1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvamVjdC1mb3JtLWNvbnRhaW5lcicpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgY29uc3QgcHJvamVjdCA9IGNyZWF0ZVByb2plY3RDbGFzcyhwLmlubmVyVGV4dCk7XG59XG5cbmZ1bmN0aW9uIGRlbGV0ZVByb2plY3QoZGl2LCBwcm9qZWN0KSB7XG4gIGxldCBpbmRleCA9IGRpdi5kYXRhc2V0LnByb2plY3RJbmRleDtcbiAgZGl2LnJlbW92ZSgpO1xuICBwcm9qZWN0LnJlbW92ZVByb2plY3QoKTtcbiAgaWYoaW5kZXggPiAwKSB7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rhc2stZm9ybScpLmRhdGFzZXQucHJvamVjdEluZGV4ID0gaW5kZXggLSAxO1xuICAgIHByb2plY3RIZWFkZXIuaW5uZXJUZXh0ID0gYXJyUHJvamVjdHNbaW5kZXggLSAxXS50aXRsZTtcbiAgfSBlbHNlIHtcbiAgICBwcm9qZWN0SGVhZGVyLmlubmVyVGV4dCA9IFwiXCI7XG4gIH1cbiAgY29uc3QgcHJvamVjdFRhc2tzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgZGl2LnRhc2tbZGF0YS1wcm9qZWN0LWluZGV4PVwiJHtpbmRleH1cIl1gKTtcbiAgZm9yKGxldCB0YXNrIG9mIHByb2plY3RUYXNrcykge1xuICAgIHRhc2sucmVtb3ZlKCk7XG4gIH1cbiAgY29uc3QgcHJvamVjdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucHJvamVjdCcpO1xuICBmb3IobGV0IGkgaW4gYXJyUHJvamVjdHMpIHtcbiAgICBwcm9qZWN0c1tpXS5zZXRBdHRyaWJ1dGUoJ2RhdGEtcHJvamVjdC1pbmRleCcsIGkpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVRhc2socHJvamVjdEluZGV4KSB7XG4gIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBjb25zdCBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgY29uc3QgcFRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICBjb25zdCBwRGVzYyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgY29uc3QgcER1ZURhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gIGNvbnN0IHBQcmlvcml0eSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgY29uc3QgYnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG5cbiAgbGV0IHRpdGxlVmFsdWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGl0bGUnKS52YWx1ZTtcbiAgbGV0IGRlc2NWYWx1ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZXNjJykudmFsdWU7XG4gIGxldCBkdWVEYXRlVmFsdWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZHVlLWRhdGUnKS52YWx1ZTtcbiAgbGV0IHByaW9yaXR5VmFsdWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJpb3JpdHknKS52YWx1ZTtcblxuICBkaXYuY2xhc3NMaXN0LmFkZCgndGFzaycpO1xuICBkaXYuc2V0QXR0cmlidXRlKCdkYXRhLXByb2plY3QtaW5kZXgnLCBwcm9qZWN0SW5kZXgpO1xuICBsYWJlbC5pbm5lclRleHQgPSBcIlVuZmluaXNoZWRcIjtcbiAgaW5wdXQudHlwZSA9IFwiY2hlY2tib3hcIjtcbiAgaW5wdXQuY2xhc3NMaXN0LmFkZCgnY2hlY2tib3gnKTtcbiAgcFRpdGxlLmlubmVyVGV4dCA9IHRpdGxlVmFsdWU7XG4gIHBEZXNjLmNsYXNzTGlzdC5hZGQoJ2Rlc2MnKTtcbiAgcERlc2MuaW5uZXJUZXh0ID0gZGVzY1ZhbHVlO1xuICBwRHVlRGF0ZS5pbm5lclRleHQgPSBkdWVEYXRlVmFsdWU7XG4gIHBQcmlvcml0eS5pbm5lclRleHQgPSBwcmlvcml0eVZhbHVlO1xuICBidG4uY2xhc3NMaXN0LmFkZCgnY2xvc2UtYnRuJyk7XG4gIGJ0bi5pbm5lclRleHQgPSBcIlhcIjtcblxuICBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgZGVsZXRlVGFzayhkaXYsIHRhc2spO1xuICB9KVxuXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YXNrLWNvbnRhaW5lcicpLmFwcGVuZENoaWxkKGRpdik7XG4gIGRpdi5hcHBlbmQobGFiZWwsIHBUaXRsZSwgcERlc2MsIHBEdWVEYXRlLCBwUHJpb3JpdHksIGJ0bik7XG4gIGxhYmVsLmFwcGVuZENoaWxkKGlucHV0KTtcblxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFzay1mb3JtJykucmVzZXQoKTtcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rhc2stZm9ybS1jb250YWluZXInKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gIGNvbnN0IHRhc2sgPSBjcmVhdGVUYXNrQ2xhc3ModGl0bGVWYWx1ZSwgZGVzY1ZhbHVlLCBkdWVEYXRlVmFsdWUsIHByaW9yaXR5VmFsdWUsIGZhbHNlLCBwcm9qZWN0SW5kZXgpO1xuICBjb25zb2xlLmxvZyhhcnJQcm9qZWN0cyk7XG59XG5cbmZ1bmN0aW9uIGFwcGVuZFRhc2sodGl0bGUsIGRlc2MsIGR1ZWRhdGUsIHByaW9yaXR5LCBjb21wbGV0ZSwgcHJvamVjdEluZGV4KSB7XG4gIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBjb25zdCBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgY29uc3QgcFRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICBjb25zdCBwRGVzYyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgY29uc3QgcER1ZURhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gIGNvbnN0IHBQcmlvcml0eSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgY29uc3QgYnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG5cbiAgZGl2LmNsYXNzTGlzdC5hZGQoJ3Rhc2snKTtcbiAgZGl2LnNldEF0dHJpYnV0ZSgnZGF0YS1wcm9qZWN0LWluZGV4JywgcHJvamVjdEluZGV4KTtcbiAgaWYoY29tcGxldGUgPT09IHRydWUpIHtcbiAgICBsYWJlbC5pbm5lclRleHQgPSBcIkNvbXBsZXRlXCI7XG4gIH0gZWxzZSB7XG4gICAgbGFiZWwuaW5uZXJUZXh0ID0gXCJVbmZpbmlzaGVkXCI7XG4gIH1cbiAgaW5wdXQudHlwZSA9IFwiY2hlY2tib3hcIjtcbiAgaW5wdXQuY2xhc3NMaXN0LmFkZCgnY2hlY2tib3gnKTtcbiAgcFRpdGxlLmlubmVyVGV4dCA9IHRpdGxlO1xuICBwRGVzYy5jbGFzc0xpc3QuYWRkKCdkZXNjJyk7XG4gIHBEZXNjLmlubmVyVGV4dCA9IGRlc2M7XG4gIHBEdWVEYXRlLmlubmVyVGV4dCA9IGR1ZWRhdGU7XG4gIHBQcmlvcml0eS5pbm5lclRleHQgPSBwcmlvcml0eTtcbiAgYnRuLmNsYXNzTGlzdC5hZGQoJ2Nsb3NlLWJ0bicpO1xuICBidG4uaW5uZXJUZXh0ID0gXCJYXCI7XG5cbiAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGRlbGV0ZVRhc2soZGl2LCB0YXNrKTtcbiAgfSlcblxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFzay1jb250YWluZXInKS5hcHBlbmRDaGlsZChkaXYpO1xuICBkaXYuYXBwZW5kKGxhYmVsLCBwVGl0bGUsIHBEZXNjLCBwRHVlRGF0ZSwgcFByaW9yaXR5LCBidG4pO1xuICBsYWJlbC5hcHBlbmRDaGlsZChpbnB1dCk7XG59XG5cbmZ1bmN0aW9uIGNsZWFyVGFzaygpIHtcbiAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rhc2stY29udGFpbmVyJyk7XG4gIHdoaWxlKGNvbnRhaW5lci5oYXNDaGlsZE5vZGVzKCkgJiYgY29udGFpbmVyLmNoaWxkRWxlbWVudENvdW50ID4gMSkge1xuICAgIGNvbnRhaW5lci5yZW1vdmVDaGlsZChjb250YWluZXIubGFzdENoaWxkKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBkZWxldGVUYXNrKGRpdiwgdGFzaykge1xuICBsZXQgaW5kZXggPSBkaXYuZGF0YXNldC5wcm9qZWN0SW5kZXg7XG4gIGRpdi5yZW1vdmUoKTtcbiAgYXJyUHJvamVjdHNbaW5kZXhdLnJlbW92ZVRhc2sodGFzayk7XG59XG5cbmNyZWF0ZVByb2plY3QoXCJEZWZhdWx0XCIpO1xuXG5leHBvcnQgeyBjcmVhdGVQcm9qZWN0LCBjcmVhdGVUYXNrIH0iLCJpbXBvcnQgeyBjcmVhdGVQcm9qZWN0LCBjcmVhdGVUYXNrIH0gZnJvbSBcIi4vRE9NXCI7XG5cbmNvbnN0IHByb2plY3RCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkLXByb2plY3QtYnRuJyk7XG5jb25zdCBhZGRUYXNrQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZC10YXNrLWJ0bicpO1xuY29uc3QgdGFza0Zvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFzay1mb3JtJyk7XG5jb25zdCBwcm9qZWN0Rm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9qZWN0LWZvcm0nKTtcblxucHJvamVjdEZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGUpID0+IHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBjcmVhdGVQcm9qZWN0KGUudGFyZ2V0WzBdLnZhbHVlKTtcbn0pO1xuXG5wcm9qZWN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvamVjdC1mb3JtLWNvbnRhaW5lcicpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xufSk7XG5cbnRhc2tGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChlKSA9PiB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcbiAgY29uc29sZS5sb2coZS50YXJnZXQuZGF0YXNldC5wcm9qZWN0SW5kZXgpO1xuICBjcmVhdGVUYXNrKGUudGFyZ2V0LmRhdGFzZXQucHJvamVjdEluZGV4KTtcbn0pO1xuXG5hZGRUYXNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBjb25zdCBwcm9qZWN0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucHJvamVjdFwiKTtcbiAgaWYocHJvamVjdHMubGVuZ3RoID4gMCkge1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YXNrLWZvcm0tY29udGFpbmVyJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gIH1cbn0pOyJdLCJuYW1lcyI6WyJhcnJQcm9qZWN0cyIsIlByb2plY3QiLCJjb25zdHJ1Y3RvciIsInRpdGxlIiwidGhpcyIsInRhc2tzIiwicmVtb3ZlUHJvamVjdCIsInNwbGljZSIsImluZGV4T2YiLCJhZGRUYXNrIiwidGFzayIsImNvbnNvbGUiLCJsb2ciLCJwdXNoIiwicmVtb3ZlVGFzayIsIlRhc2siLCJkZXNjIiwiZHVlZGF0ZSIsInByaW9yaXR5IiwiY29tcGxldGUiLCJwcm9qZWN0SGVhZGVyIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImNyZWF0ZVByb2plY3QiLCJwcm9qZWN0TmFtZSIsImNsZWFyVGFzayIsImRpdiIsImNyZWF0ZUVsZW1lbnQiLCJwIiwiYnRuIiwiaW5uZXJUZXh0IiwiY2xhc3NMaXN0IiwiYWRkIiwic2V0QXR0cmlidXRlIiwibGVuZ3RoIiwiZGlzYWJsZWQiLCJhZGRFdmVudExpc3RlbmVyIiwicHJvamVjdEluZGV4IiwiZGF0YXNldCIsInByb2plY3QiLCJhcHBlbmRUYXNrIiwiaW5kZXgiLCJyZW1vdmUiLCJwcm9qZWN0VGFza3MiLCJxdWVyeVNlbGVjdG9yQWxsIiwicHJvamVjdHMiLCJpIiwiZGVsZXRlUHJvamVjdCIsImhhc0NoaWxkTm9kZXMiLCJyZW1vdmVDaGlsZCIsImxhc3RDaGlsZCIsImFwcGVuZENoaWxkIiwiYXBwZW5kIiwicmVzZXQiLCJzdHlsZSIsImRpc3BsYXkiLCJjcmVhdGVQcm9qZWN0Q2xhc3MiLCJsYWJlbCIsImlucHV0IiwicFRpdGxlIiwicERlc2MiLCJwRHVlRGF0ZSIsInBQcmlvcml0eSIsInR5cGUiLCJkZWxldGVUYXNrIiwiY29udGFpbmVyIiwiY2hpbGRFbGVtZW50Q291bnQiLCJwcm9qZWN0QnRuIiwiYWRkVGFza0J0biIsInRhc2tGb3JtIiwiZSIsInByZXZlbnREZWZhdWx0IiwidGFyZ2V0IiwidmFsdWUiLCJ0aXRsZVZhbHVlIiwiZGVzY1ZhbHVlIiwiZHVlRGF0ZVZhbHVlIiwicHJpb3JpdHlWYWx1ZSIsImNyZWF0ZVRhc2tDbGFzcyIsImNyZWF0ZVRhc2siXSwic291cmNlUm9vdCI6IiJ9